{"version":3,"sources":["../../../../../../Desktop/Projects/LetterFlow/src/lib/supabase-api.ts"],"sourcesContent":["import { createServerClient } from \"@supabase/ssr\";\nimport { NextRequest } from \"next/server\";\nimport type { Database } from \"./database.types\";\n\nexport async function getAuthenticatedUser(request: NextRequest) {\n  const supabase = createServerClient<Database>(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        getAll() {\n          return request.cookies.getAll();\n        },\n        setAll() {\n          // Route Handlers cannot set cookies on the request\n        },\n      },\n    }\n  );\n\n  const {\n    data: { user },\n    error,\n  } = await supabase.auth.getUser();\n\n  if (error || !user) {\n    return { user: null, supabase, error: \"Unauthorized\" as const };\n  }\n\n  return { user, supabase, error: null };\n}\n"],"names":[],"mappings":"m/BAAA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OAIO,eAAe,EAAqB,CAAoB,EAC7D,IAAM,EAAW,CAAA,EAAA,EAAA,kBAAA,AAAkB,EAAA,2CAAA,mNAGjC,CACE,QAAS,QACP,IACS,EAAQ,OAAO,CAAC,MAAM,GAE/B,SAEA,CACF,CACF,GAGI,CACJ,KAAM,MAAE,CAAI,CAAE,CACd,OAAK,CACN,CAAG,MAAM,EAAS,IAAI,CAAC,OAAO,UAE/B,AAAI,GAAS,CAAC,EACL,CAAE,GADS,EACH,cAAM,EAAU,MAAO,cAAwB,EAGzD,MAAE,WAAM,EAAU,MAAO,IAAK,CACvC"}