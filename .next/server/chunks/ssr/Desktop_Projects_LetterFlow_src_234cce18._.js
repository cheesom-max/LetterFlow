module.exports=[26027,a=>{"use strict";var b=a.i(80290);let c={default:"bg-gray-100 text-gray-700",success:"bg-green-100 text-green-700",warning:"bg-amber-100 text-amber-700",info:"bg-blue-100 text-blue-700",purple:"bg-indigo-100 text-indigo-700"};function d({children:a,variant:d="default",className:e=""}){return(0,b.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${c[d]} ${e}`,children:a})}a.s(["default",()=>d])},70947,a=>{"use strict";var b=a.i(6884),c=a.i(48827);function d(){let a=(0,b.useMemo)(()=>(0,c.createBrowserSupabaseClient)(),[]),[d,e]=(0,b.useState)(null),[f,g]=(0,b.useState)(!0);return(0,b.useEffect)(()=>{a.auth.getUser().then(({data:a})=>{e(a.user),g(!1)});let{data:{subscription:b}}=a.auth.onAuthStateChange((a,b)=>{e(b?.user??null)});return()=>b.unsubscribe()},[a]),{supabase:a,user:d,loading:f}}a.s(["useUser",()=>d])},69618,a=>{"use strict";var b=a.i(80290);let c={primary:"bg-gradient-to-r from-indigo-600 to-violet-600 text-white hover:from-indigo-700 hover:to-violet-700 shadow-md shadow-indigo-200 hover:shadow-lg hover:shadow-indigo-300 active:scale-[0.98]",secondary:"bg-white text-gray-700 border border-gray-200 hover:border-indigo-300 hover:text-indigo-600 shadow-sm hover:shadow-md active:scale-[0.98]",ghost:"text-gray-600 hover:text-indigo-600 hover:bg-indigo-50"},d={sm:"px-3.5 py-1.5 text-sm gap-1.5",md:"px-5 py-2.5 text-sm gap-2",lg:"px-7 py-3.5 text-base gap-2"};function e({variant:a="primary",size:e="md",className:f="",children:g,...h}){return(0,b.jsx)("button",{className:`inline-flex items-center justify-center font-semibold rounded-xl transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer ${c[a]} ${d[e]} ${f}`,...h,children:g})}a.s(["default",()=>e])},66725,a=>{"use strict";var b=a.i(80290),c=a.i(6884);function d({isOpen:a,onClose:d,title:e,children:f}){return((0,c.useEffect)(()=>{let b=a=>{"Escape"===a.key&&d()};return a&&(document.addEventListener("keydown",b),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",b),document.body.style.overflow=""}},[a,d]),a)?(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,b.jsx)("div",{className:"fixed inset-0 bg-gray-900/60 backdrop-blur-sm",onClick:d}),(0,b.jsxs)("div",{className:"relative w-full max-w-lg mx-4 bg-white rounded-2xl shadow-2xl border border-gray-200 max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-100",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:e}),(0,b.jsx)("button",{onClick:d,className:"p-1.5 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsx)("div",{className:"px-6 py-5",children:f})]})]}):null}a.s(["default",()=>d])},45016,a=>{"use strict";function b(a){let b=new Date(a),c=Math.floor((new Date().getTime()-b.getTime())/36e5);if(c<1)return"Just now";if(c<24)return`${c}h ago`;let d=Math.floor(c/24);return d<7?`${d}d ago`:b.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function c(a){return a&&a.trim()?a.trim().split(/\s+/).filter(Boolean).length:0}a.s(["countWords",()=>c,"formatDate",()=>b])},29046,a=>{"use strict";var b=a.i(6884),c=a.i(70947);function d(){let{supabase:a,user:d}=(0,c.useUser)(),[e,f]=(0,b.useState)([]),[g,h]=(0,b.useState)(!0),[i,j]=(0,b.useState)(null),[k,l]=(0,b.useState)(0);(0,b.useEffect)(()=>{if(!d)return;let b=!0;return(async()=>{try{let{data:c,error:e}=await a.from("topics").select("*, articles(count)").eq("user_id",d.id).order("created_at",{ascending:!1});if(!b)return;if(e)throw e;let g=(c||[]).map(a=>({...a,article_count:a.articles?a.articles[0]?.count??0:0}));f(g),j(null)}catch(a){if(!b)return;j(a instanceof Error?a.message:"Failed to load topics")}finally{b&&h(!1)}})(),()=>{b=!1}},[a,d,k]);let m=(0,b.useCallback)(()=>{h(!0),l(a=>a+1)},[]);return{topics:e,loading:g,error:i,addTopic:async b=>{if(!d)return;let{error:c}=await a.from("topics").insert({user_id:d.id,...b});return c||m(),c},updateTopic:async(b,c)=>{if(!d)return;let{error:e}=await a.from("topics").update(c).eq("id",b).eq("user_id",d.id);return e||m(),e},deleteTopic:async b=>{if(!d)return;let{error:c}=await a.from("topics").delete().eq("id",b).eq("user_id",d.id);return c||m(),c},refresh:m}}a.s(["useTopics",()=>d])},91830,a=>{"use strict";var b=a.i(80290),c=a.i(6884),d=a.i(4310),e=a.i(69618),f=a.i(83308),g=a.i(26027),h=a.i(45016);function i({article:a,onBookmark:c,onAddToDraft:d}){let e=a.relevance_score>=90?"from-emerald-500 to-teal-500 text-white":a.relevance_score>=80?"from-blue-500 to-cyan-500 text-white":"from-gray-100 to-gray-200 text-gray-600";return(0,b.jsxs)("div",{className:"group bg-white rounded-2xl border border-gray-100 shadow-sm p-5 hover:shadow-lg hover:border-indigo-100 transition-all duration-300",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2.5",children:[(0,b.jsx)(g.default,{variant:"purple",children:a.topic_name||"Uncategorized"}),(0,b.jsx)("span",{className:"text-xs text-gray-400",children:a.published_at?(0,h.formatDate)(a.published_at):""})]}),(0,b.jsx)("h3",{className:"text-base font-bold text-gray-900 leading-snug group-hover:text-indigo-700 transition-colors",children:a.title}),(0,b.jsx)("p",{className:"mt-2 text-sm text-gray-500 leading-relaxed line-clamp-2",children:a.summary}),(0,b.jsxs)("div",{className:"mt-3 flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-4 h-4 bg-gray-100 rounded-full"}),(0,b.jsx)("span",{className:"text-xs font-medium text-gray-500",children:a.source})]})]}),(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2 shrink-0",children:[(0,b.jsx)("div",{className:`w-13 h-13 rounded-xl bg-gradient-to-br ${e} flex items-center justify-center shadow-md`,children:(0,b.jsx)("span",{className:"text-sm font-extrabold",children:a.relevance_score})}),(0,b.jsx)("button",{onClick:()=>c(a.id),className:`p-1.5 rounded-lg transition-all cursor-pointer ${a.is_bookmarked?"text-indigo-600 bg-indigo-50":"text-gray-300 hover:text-indigo-400 hover:bg-indigo-50"}`,children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:a.is_bookmarked?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})})]})]}),(0,b.jsxs)("div",{className:"mt-4 pt-3 border-t border-gray-50 flex items-center gap-1.5",children:[(0,b.jsx)("button",{onClick:()=>d?.(a.id),className:"text-xs font-medium px-3 py-1.5 rounded-lg transition-all text-gray-500 hover:text-indigo-600 hover:bg-indigo-50 cursor-pointer",children:"Add to Draft"}),(0,b.jsx)("a",{href:a.source_url,target:"_blank",rel:"noopener noreferrer",className:"text-xs font-medium px-3 py-1.5 rounded-lg transition-all text-gray-500 hover:text-indigo-600 hover:bg-indigo-50",children:"View Original"})]})]})}var j=a.i(66725),k=a.i(70947),l=a.i(29046);function m(){let{articles:a,categories:g,loading:h,filters:m,setFilters:n,toggleBookmark:o,curate:p,curateLoading:q}=function(){let{supabase:a,user:b}=(0,k.useUser)(),[d,e]=(0,c.useState)([]),[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(!0),[j,l]=(0,c.useState)({category:"All",search:""}),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(0);(0,c.useEffect)(()=>{if(!b)return;let c=!0;return(async()=>{try{let d=a.from("articles").select("*, topics(name, category)").eq("user_id",b.id).order("relevance_score",{ascending:!1});j.search&&(d=d.ilike("title",`%${j.search}%`));let{data:f,error:h}=await d;if(!c)return;if(h)throw h;let i=(f||[]).map(a=>{let b=a.topics;return{...a,topic_name:b?.name??"",_category:b?.category??""}}),k=[...new Set(i.map(a=>a._category).filter(Boolean))];g(k),"All"!==j.category&&(i=i.filter(a=>a._category===j.category)),e(i),p(null)}catch(a){if(!c)return;p(a instanceof Error?a.message:"Failed to load articles")}finally{c&&i(!1)}})(),()=>{c=!1}},[a,b,j,q]);let s=(0,c.useCallback)(()=>{i(!0),r(a=>a+1)},[]),t=async c=>{let f=d.find(a=>a.id===c);if(!f||!b)return;e(a=>a.map(a=>a.id===c?{...a,is_bookmarked:!a.is_bookmarked}:a));let{error:g}=await a.from("articles").update({is_bookmarked:!f.is_bookmarked}).eq("id",c).eq("user_id",b.id);g&&e(a=>a.map(a=>a.id===c?{...a,is_bookmarked:f.is_bookmarked}:a))};return{articles:d,categories:f,loading:h,error:o,filters:j,setFilters:l,toggleBookmark:t,curate:async a=>{if(b){n(!0),p(null);try{let b=await fetch("/api/curate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topicId:a})});if(!b.ok){let a=await b.json().catch(()=>({}));p(a.error||"Failed to curate articles");return}s()}finally{n(!1)}}},curateLoading:m,refresh:s}}(),{topics:r}=(0,l.useTopics)(),{user:s}=(0,k.useUser)(),t=(0,d.useRouter)(),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)(null);(0,c.useEffect)(()=>{let a=setTimeout(()=>{n(a=>({...a,search:u}))},300);return()=>clearTimeout(a)},[u,n]);let C=async a=>{x(!1),await p(a)},D=async()=>{if(!s||0===y.length)return;B(null);let a=await fetch("/api/generate-draft",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({articleIds:y})});if(!a.ok)return void B((await a.json().catch(()=>({}))).error||"Failed to generate draft");let{draft:b}=await a.json();t.push(`/dashboard/drafts/${b.id}`)},E=a=>{z(b=>b.includes(a)?b.filter(b=>b!==a):[...b,a])},F=["All",...g];return h?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"h-5 w-48 bg-gray-200 rounded animate-pulse"}),(0,b.jsx)("div",{className:"h-10 w-32 bg-gray-200 rounded-xl animate-pulse"})]}),(0,b.jsx)("div",{className:"space-y-4",children:[1,2,3].map(a=>(0,b.jsx)("div",{className:"h-40 bg-gray-100 rounded-2xl animate-pulse"},a))})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,b.jsx)("div",{children:(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:[a.length," articles curated"]})}),(0,b.jsxs)("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[(0,b.jsx)("div",{className:"flex-1 sm:w-64",children:(0,b.jsx)(f.default,{placeholder:"Filter articles...",value:u,onChange:a=>v(a.target.value),icon:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})}),(0,b.jsxs)(e.default,{onClick:()=>x(!0),disabled:q,children:[(0,b.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),q?"Curating...":"Refresh"]})]})]}),A&&(0,b.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl flex items-center gap-3",children:[(0,b.jsx)("span",{className:"text-sm flex-1",children:A}),(0,b.jsx)("button",{onClick:()=>B(null),className:"text-red-400 hover:text-red-600 cursor-pointer",children:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:F.map(a=>(0,b.jsx)("button",{onClick:()=>n(b=>({...b,category:a})),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-colors cursor-pointer ${m.category===a?"bg-indigo-600 text-white":"bg-white text-gray-600 border border-gray-200 hover:border-indigo-300 hover:text-indigo-600"}`,children:a},a))}),y.length>0&&(0,b.jsxs)("div",{className:"flex items-center justify-between bg-indigo-50 border border-indigo-200 rounded-xl px-4 py-3",children:[(0,b.jsxs)("span",{className:"text-sm font-medium text-indigo-700",children:[y.length," article",y.length>1?"s":""," selected"]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(e.default,{variant:"ghost",size:"sm",onClick:()=>z([]),children:"Clear"}),(0,b.jsx)(e.default,{size:"sm",onClick:D,children:"Generate Draft"})]})]}),0===a.length?(0,b.jsxs)("div",{className:"text-center py-16",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-indigo-50 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)("svg",{className:"w-8 h-8 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})})}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"No articles yet"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-6",children:"Run AI curation on a topic to start discovering content."}),(0,b.jsx)(e.default,{onClick:()=>x(!0),children:"Run AI Curation"})]}):(0,b.jsx)("div",{className:"space-y-4",children:a.map(a=>(0,b.jsx)(i,{article:a,onBookmark:o,onAddToDraft:E},a.id))}),(0,b.jsx)(j.default,{isOpen:w,onClose:()=>x(!1),title:"Select Topic to Curate",children:0===r.length?(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"No topics available. Add a topic first."}):(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-3",children:"Choose a topic to fetch and analyze new articles:"}),r.filter(a=>a.is_active).map(a=>(0,b.jsxs)("button",{onClick:()=>C(a.id),className:"w-full text-left px-4 py-3 rounded-xl border border-gray-200 hover:border-indigo-300 hover:bg-indigo-50 transition-colors cursor-pointer",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-900",children:a.name}),(0,b.jsx)("span",{className:"ml-2 text-xs text-gray-400",children:a.keywords.slice(0,3).join(", ")})]},a.id))]})})]})}a.s(["default",()=>m],91830)}];

//# sourceMappingURL=Desktop_Projects_LetterFlow_src_234cce18._.js.map