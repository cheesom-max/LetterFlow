{"version":3,"sources":["../../../../../../../Desktop/Projects/LetterFlow/src/hooks/useUser.ts","../../../../../../../Desktop/Projects/LetterFlow/src/lib/constants.ts","../../../../../../../Desktop/Projects/LetterFlow/src/app/dashboard/onboarding/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useMemo } from \"react\";\nimport { createBrowserSupabaseClient } from \"@/lib/supabase\";\nimport type { User } from \"@supabase/supabase-js\";\n\nexport function useUser() {\n  const supabase = useMemo(() => createBrowserSupabaseClient(), []);\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    supabase.auth.getUser().then(({ data }) => {\n      setUser(data.user);\n      setLoading(false);\n    });\n\n    const {\n      data: { subscription },\n    } = supabase.auth.onAuthStateChange((_event, session) => {\n      setUser(session?.user ?? null);\n    });\n\n    return () => subscription.unsubscribe();\n  }, [supabase]);\n\n  return { supabase, user, loading };\n}\n","// OpenAI Model Configuration\nexport const OPENAI_MODELS = {\n  GPT_4O: \"gpt-4o\",\n  GPT_4O_MINI: \"gpt-4o-mini\",\n} as const;\n\n// OpenAI Parameters per function\nexport const OPENAI_PARAMS = {\n  SUMMARIZE: { maxTokens: 200, temperature: 0.3 },\n  SCORE_RELEVANCE: { maxTokens: 10, temperature: 0 },\n  GENERATE_DRAFT: { maxTokens: 2000, temperature: 0.7 },\n  SUBJECT_LINES: { maxTokens: 300, temperature: 0.8 },\n  REWRITE: { maxTokens: 2000, temperature: 0.7 },\n  SHORTEN: { maxTokens: 1500, temperature: 0.3 },\n  TLDR: { maxTokens: 200, temperature: 0.3 },\n} as const;\n\n// Draft Status Configuration\nexport const DRAFT_STATUS_MAP: Record<\n  string,\n  { variant: \"default\" | \"success\" | \"warning\" | \"info\"; label: string }\n> = {\n  draft: { variant: \"default\", label: \"Draft\" },\n  review: { variant: \"warning\", label: \"In Review\" },\n  scheduled: { variant: \"info\", label: \"Scheduled\" },\n  published: { variant: \"success\", label: \"Published\" },\n};\n\n// Platform Configuration\nexport const PLATFORM_META: Record<\n  string,\n  { label: string; description: string; color: string }\n> = {\n  beehiiv: {\n    label: \"Beehiiv\",\n    description: \"Connect your Beehiiv account to publish directly\",\n    color: \"bg-amber-500\",\n  },\n  substack: {\n    label: \"Substack\",\n    description: \"Publish newsletters to your Substack\",\n    color: \"bg-orange-500\",\n  },\n  kit: {\n    label: \"Kit (ConvertKit)\",\n    description: \"Send newsletters via Kit email platform\",\n    color: \"bg-blue-500\",\n  },\n};\n\n// AI Transform Actions\nexport const AI_ACTIONS = [\"rewrite\", \"shorten\", \"tldr\"] as const;\n\n// Default Style Profile\nexport const DEFAULT_STYLE_PROFILE =\n  \"Conversational, engaging tone with short paragraphs and bold key takeaways\";\n\n// API Error Messages\nexport const ERROR_MESSAGES = {\n  UNAUTHORIZED: \"Unauthorized\",\n  MISSING_PARAMS: \"Required parameters missing\",\n  NOT_FOUND: \"Resource not found\",\n  AI_FAILED: \"AI processing failed\",\n  PUBLISH_FAILED: \"Failed to publish\",\n  CURATE_FAILED: \"Failed to curate articles\",\n  DRAFT_FAILED: \"Failed to generate draft\",\n} as const;\n\n// Timing Configuration\nexport const TIMING = {\n  DEBOUNCE_MS: 2000,\n  SAVE_DISPLAY_MS: 2000,\n  RSS_CACHE_SEC: 3600,\n} as const;\n\n// RSS Configuration\nexport const RSS_CONFIG = {\n  MAX_ITEMS: 20,\n  USER_AGENT: \"LetterFlow/1.0\",\n} as const;\n\n// Interest Options for onboarding\nexport const INTEREST_OPTIONS = [\n  \"Technology\",\n  \"Business\",\n  \"Creator\",\n  \"Marketing\",\n  \"Finance\",\n  \"AI & ML\",\n  \"Design\",\n  \"Startup\",\n] as const;\n","\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { useUser } from \"@/hooks/useUser\";\nimport { INTEREST_OPTIONS } from \"@/lib/constants\";\n\nexport default function OnboardingPage() {\n  const { supabase, user } = useUser();\n  const router = useRouter();\n  const [newsletterName, setNewsletterName] = useState(\"\");\n  const [interests, setInterests] = useState<string[]>([]);\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  const toggleInterest = (interest: string) => {\n    setInterests((prev) =>\n      prev.includes(interest)\n        ? prev.filter((i) => i !== interest)\n        : [...prev, interest]\n    );\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (interests.length === 0) {\n      setError(\"Please select at least one interest.\");\n      return;\n    }\n    if (!user) return;\n\n    setSaving(true);\n    setError(\"\");\n\n    const { error: updateError } = await supabase\n      .from(\"profiles\")\n      .update({\n        newsletter_name: newsletterName || null,\n        interests,\n      })\n      .eq(\"id\", user.id);\n\n    if (updateError) {\n      setError(\"Failed to save profile. Please try again.\");\n      setSaving(false);\n      return;\n    }\n\n    router.push(\"/dashboard\");\n  };\n\n  return (\n    <div className=\"min-h-[calc(100vh-4rem)] flex items-center justify-center px-4\">\n      <div className=\"w-full max-w-lg\">\n        <div className=\"text-center mb-8\">\n          <div className=\"w-16 h-16 bg-gradient-to-br from-indigo-600 to-violet-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg\">\n            <span className=\"text-white text-2xl font-bold\">LF</span>\n          </div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">\n            Welcome to LetterFlow!\n          </h1>\n          <p className=\"mt-2 text-sm text-gray-500\">\n            Let&apos;s personalize your experience. This helps us curate the\n            best content for your newsletter.\n          </p>\n        </div>\n\n        <div className=\"bg-white rounded-2xl shadow-sm border border-gray-200 p-8\">\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1.5\">\n                Newsletter Name{\" \"}\n                <span className=\"text-gray-400 font-normal\">(optional)</span>\n              </label>\n              <input\n                type=\"text\"\n                value={newsletterName}\n                onChange={(e) => setNewsletterName(e.target.value)}\n                className=\"w-full px-4 py-2.5 border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n                placeholder=\"e.g. The Weekly Byte\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Interests{\" \"}\n                <span className=\"text-gray-400 font-normal\">\n                  (select at least 1)\n                </span>\n              </label>\n              <div className=\"flex flex-wrap gap-2\">\n                {INTEREST_OPTIONS.map((interest) => {\n                  const selected = interests.includes(interest);\n                  return (\n                    <button\n                      key={interest}\n                      type=\"button\"\n                      onClick={() => toggleInterest(interest)}\n                      className={`px-3.5 py-2 rounded-full text-sm font-medium transition-all cursor-pointer ${\n                        selected\n                          ? \"bg-indigo-600 text-white shadow-sm\"\n                          : \"bg-gray-100 text-gray-600 hover:bg-gray-200\"\n                      }`}\n                    >\n                      {selected && (\n                        <svg\n                          className=\"w-3.5 h-3.5 inline mr-1 -mt-0.5\"\n                          fill=\"none\"\n                          stroke=\"currentColor\"\n                          viewBox=\"0 0 24 24\"\n                        >\n                          <path\n                            strokeLinecap=\"round\"\n                            strokeLinejoin=\"round\"\n                            strokeWidth={2.5}\n                            d=\"M5 13l4 4L19 7\"\n                          />\n                        </svg>\n                      )}\n                      {interest}\n                    </button>\n                  );\n                })}\n              </div>\n            </div>\n\n            {error && (\n              <p className=\"text-sm text-red-600 bg-red-50 px-3 py-2 rounded-lg\">\n                {error}\n              </p>\n            )}\n\n            <button\n              type=\"submit\"\n              disabled={saving || interests.length === 0}\n              className=\"w-full px-4 py-3 bg-gradient-to-r from-indigo-600 to-violet-600 text-white font-semibold rounded-xl text-sm hover:from-indigo-700 hover:to-violet-700 transition-all shadow-md shadow-indigo-200 disabled:opacity-50 cursor-pointer\"\n            >\n              {saving ? \"Saving...\" : \"Get Started\"}\n            </button>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}