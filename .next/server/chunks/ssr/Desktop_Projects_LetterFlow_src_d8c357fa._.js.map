{"version":3,"sources":["../../../../../../../Desktop/Projects/LetterFlow/src/lib/constants.ts","../../../../../../../Desktop/Projects/LetterFlow/src/components/ui/Badge.tsx","../../../../../../../Desktop/Projects/LetterFlow/src/hooks/useUser.ts","../../../../../../../Desktop/Projects/LetterFlow/src/components/ui/Button.tsx","../../../../../../../Desktop/Projects/LetterFlow/src/components/ui/Modal.tsx","../../../../../../../Desktop/Projects/LetterFlow/src/lib/utils.ts","../../../../../../../Desktop/Projects/LetterFlow/src/app/dashboard/drafts/%5Bid%5D/page.tsx","../../../../../../../Desktop/Projects/LetterFlow/src/components/drafts/Editor.tsx","../../../../../../../Desktop/Projects/LetterFlow/src/hooks/useDraft.ts"],"sourcesContent":["// OpenAI Model Configuration\nexport const OPENAI_MODELS = {\n  GPT_4O: \"gpt-4o\",\n  GPT_4O_MINI: \"gpt-4o-mini\",\n} as const;\n\n// OpenAI Parameters per function\nexport const OPENAI_PARAMS = {\n  SUMMARIZE: { maxTokens: 200, temperature: 0.3 },\n  SCORE_RELEVANCE: { maxTokens: 10, temperature: 0 },\n  GENERATE_DRAFT: { maxTokens: 2000, temperature: 0.7 },\n  SUBJECT_LINES: { maxTokens: 300, temperature: 0.8 },\n  REWRITE: { maxTokens: 2000, temperature: 0.7 },\n  SHORTEN: { maxTokens: 1500, temperature: 0.3 },\n  TLDR: { maxTokens: 200, temperature: 0.3 },\n} as const;\n\n// Draft Status Configuration\nexport const DRAFT_STATUS_MAP: Record<\n  string,\n  { variant: \"default\" | \"success\" | \"warning\" | \"info\"; label: string }\n> = {\n  draft: { variant: \"default\", label: \"Draft\" },\n  review: { variant: \"warning\", label: \"In Review\" },\n  scheduled: { variant: \"info\", label: \"Scheduled\" },\n  published: { variant: \"success\", label: \"Published\" },\n};\n\n// Platform Configuration\nexport const PLATFORM_META: Record<\n  string,\n  { label: string; description: string; color: string }\n> = {\n  beehiiv: {\n    label: \"Beehiiv\",\n    description: \"Connect your Beehiiv account to publish directly\",\n    color: \"bg-amber-500\",\n  },\n  substack: {\n    label: \"Substack\",\n    description: \"Publish newsletters to your Substack\",\n    color: \"bg-orange-500\",\n  },\n  kit: {\n    label: \"Kit (ConvertKit)\",\n    description: \"Send newsletters via Kit email platform\",\n    color: \"bg-blue-500\",\n  },\n};\n\n// AI Transform Actions\nexport const AI_ACTIONS = [\"rewrite\", \"shorten\", \"tldr\"] as const;\n\n// Default Style Profile\nexport const DEFAULT_STYLE_PROFILE =\n  \"Conversational, engaging tone with short paragraphs and bold key takeaways\";\n\n// API Error Messages\nexport const ERROR_MESSAGES = {\n  UNAUTHORIZED: \"Unauthorized\",\n  MISSING_PARAMS: \"Required parameters missing\",\n  NOT_FOUND: \"Resource not found\",\n  AI_FAILED: \"AI processing failed\",\n  PUBLISH_FAILED: \"Failed to publish\",\n  CURATE_FAILED: \"Failed to curate articles\",\n  DRAFT_FAILED: \"Failed to generate draft\",\n} as const;\n\n// Timing Configuration\nexport const TIMING = {\n  DEBOUNCE_MS: 2000,\n  SAVE_DISPLAY_MS: 2000,\n  RSS_CACHE_SEC: 3600,\n} as const;\n\n// RSS Configuration\nexport const RSS_CONFIG = {\n  MAX_ITEMS: 20,\n  USER_AGENT: \"LetterFlow/1.0\",\n} as const;\n\n// Interest Options for onboarding\nexport const INTEREST_OPTIONS = [\n  \"Technology\",\n  \"Business\",\n  \"Creator\",\n  \"Marketing\",\n  \"Finance\",\n  \"AI & ML\",\n  \"Design\",\n  \"Startup\",\n] as const;\n","type BadgeVariant = \"default\" | \"success\" | \"warning\" | \"info\" | \"purple\";\n\ninterface BadgeProps {\n  children: React.ReactNode;\n  variant?: BadgeVariant;\n  className?: string;\n}\n\nconst variantClasses: Record<BadgeVariant, string> = {\n  default: \"bg-gray-100 text-gray-700\",\n  success: \"bg-green-100 text-green-700\",\n  warning: \"bg-amber-100 text-amber-700\",\n  info: \"bg-blue-100 text-blue-700\",\n  purple: \"bg-indigo-100 text-indigo-700\",\n};\n\nexport default function Badge({\n  children,\n  variant = \"default\",\n  className = \"\",\n}: BadgeProps) {\n  return (\n    <span\n      className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${variantClasses[variant]} ${className}`}\n    >\n      {children}\n    </span>\n  );\n}\n","\"use client\";\n\nimport { useState, useEffect, useMemo } from \"react\";\nimport { createBrowserSupabaseClient } from \"@/lib/supabase\";\nimport type { User } from \"@supabase/supabase-js\";\n\nexport function useUser() {\n  const supabase = useMemo(() => createBrowserSupabaseClient(), []);\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    supabase.auth.getUser().then(({ data }) => {\n      setUser(data.user);\n      setLoading(false);\n    });\n\n    const {\n      data: { subscription },\n    } = supabase.auth.onAuthStateChange((_event, session) => {\n      setUser(session?.user ?? null);\n    });\n\n    return () => subscription.unsubscribe();\n  }, [supabase]);\n\n  return { supabase, user, loading };\n}\n","import { ButtonHTMLAttributes } from \"react\";\n\ntype Variant = \"primary\" | \"secondary\" | \"ghost\";\ntype Size = \"sm\" | \"md\" | \"lg\";\n\ninterface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: Variant;\n  size?: Size;\n}\n\nconst variantClasses: Record<Variant, string> = {\n  primary:\n    \"bg-gradient-to-r from-indigo-600 to-violet-600 text-white hover:from-indigo-700 hover:to-violet-700 shadow-md shadow-indigo-200 hover:shadow-lg hover:shadow-indigo-300 active:scale-[0.98]\",\n  secondary:\n    \"bg-white text-gray-700 border border-gray-200 hover:border-indigo-300 hover:text-indigo-600 shadow-sm hover:shadow-md active:scale-[0.98]\",\n  ghost: \"text-gray-600 hover:text-indigo-600 hover:bg-indigo-50\",\n};\n\nconst sizeClasses: Record<Size, string> = {\n  sm: \"px-3.5 py-1.5 text-sm gap-1.5\",\n  md: \"px-5 py-2.5 text-sm gap-2\",\n  lg: \"px-7 py-3.5 text-base gap-2\",\n};\n\nexport default function Button({\n  variant = \"primary\",\n  size = \"md\",\n  className = \"\",\n  children,\n  ...props\n}: ButtonProps) {\n  return (\n    <button\n      className={`inline-flex items-center justify-center font-semibold rounded-xl transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer ${variantClasses[variant]} ${sizeClasses[size]} ${className}`}\n      {...props}\n    >\n      {children}\n    </button>\n  );\n}\n","\"use client\";\n\nimport { useEffect } from \"react\";\n\ninterface ModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  title: string;\n  children: React.ReactNode;\n}\n\nexport default function Modal({ isOpen, onClose, title, children }: ModalProps) {\n  useEffect(() => {\n    const handleEsc = (e: KeyboardEvent) => {\n      if (e.key === \"Escape\") onClose();\n    };\n    if (isOpen) {\n      document.addEventListener(\"keydown\", handleEsc);\n      document.body.style.overflow = \"hidden\";\n    }\n    return () => {\n      document.removeEventListener(\"keydown\", handleEsc);\n      document.body.style.overflow = \"\";\n    };\n  }, [isOpen, onClose]);\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\n      <div className=\"fixed inset-0 bg-gray-900/60 backdrop-blur-sm\" onClick={onClose} />\n      <div className=\"relative w-full max-w-lg mx-4 bg-white rounded-2xl shadow-2xl border border-gray-200 max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex items-center justify-between px-6 py-4 border-b border-gray-100\">\n          <h2 className=\"text-lg font-semibold text-gray-900\">{title}</h2>\n          <button\n            onClick={onClose}\n            className=\"p-1.5 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer\"\n          >\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n        <div className=\"px-6 py-5\">{children}</div>\n      </div>\n    </div>\n  );\n}\n","export function formatDate(dateStr: string): string {\n  const date = new Date(dateStr);\n  const now = new Date();\n  const diffMs = now.getTime() - date.getTime();\n  const diffH = Math.floor(diffMs / (1000 * 60 * 60));\n  if (diffH < 1) return \"Just now\";\n  if (diffH < 24) return `${diffH}h ago`;\n  const diffD = Math.floor(diffH / 24);\n  if (diffD < 7) return `${diffD}d ago`;\n  return date.toLocaleDateString(\"en-US\", { month: \"short\", day: \"numeric\" });\n}\n\nexport function countWords(content: string): number {\n  if (!content || !content.trim()) return 0;\n  return content.trim().split(/\\s+/).filter(Boolean).length;\n}\n","\"use client\";\n\nimport { use } from \"react\";\nimport Editor from \"@/components/drafts/Editor\";\n\nexport default function DraftEditorPage({ params }: { params: Promise<{ id: string }> }) {\n  const { id } = use(params);\n  return <Editor draftId={id} />;\n}\n","\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Button from \"@/components/ui/Button\";\nimport Badge from \"@/components/ui/Badge\";\nimport Modal from \"@/components/ui/Modal\";\nimport { useDraft } from \"@/hooks/useDraft\";\nimport { useUser } from \"@/hooks/useUser\";\nimport { DRAFT_STATUS_MAP } from \"@/lib/constants\";\nimport { countWords } from \"@/lib/utils\";\n\ninterface EditorProps {\n  draftId: string;\n}\n\nexport default function Editor({ draftId }: EditorProps) {\n  const { draft, sourceArticles, loading, saveStatus, debouncedSave, updateStatus } = useDraft(draftId);\n  const { user } = useUser();\n  const router = useRouter();\n  const [content, setContent] = useState(\"\");\n  const [subjectLines, setSubjectLines] = useState<string[]>([]);\n  const [subjectLoading, setSubjectLoading] = useState(false);\n  const [subjectModalOpen, setSubjectModalOpen] = useState(false);\n  const [publishModalOpen, setPublishModalOpen] = useState(false);\n  const [publishing, setPublishing] = useState(false);\n  const [aiLoading, setAiLoading] = useState<string | null>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  // Sync content from loaded draft\n  useEffect(() => {\n    if (draft?.content) setContent(draft.content);\n  }, [draft?.content]);\n\n  // Auto-save on content change\n  useEffect(() => {\n    if (draft && content !== draft.content) {\n      debouncedSave(content);\n    }\n  }, [content, draft, debouncedSave]);\n\n  const handleGenerateSubjectLines = async () => {\n    if (!draft) return;\n    setSubjectLoading(true);\n    setError(null);\n    try {\n      const res = await fetch(\"/api/subject-lines\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ title: draft.title, content }),\n      });\n      if (!res.ok) {\n        const data = await res.json().catch(() => ({}));\n        setError(data.error || \"Failed to generate subject lines\");\n        return;\n      }\n      const data = await res.json();\n      setSubjectLines(data.subjectLines || []);\n      setSubjectModalOpen(true);\n    } finally {\n      setSubjectLoading(false);\n    }\n  };\n\n  const handleAiTransform = async (action: \"rewrite\" | \"shorten\" | \"tldr\") => {\n    if (!content.trim()) return;\n    setAiLoading(action);\n    setError(null);\n    try {\n      const res = await fetch(\"/api/ai-transform\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ action, content }),\n      });\n      if (!res.ok) {\n        const data = await res.json().catch(() => ({}));\n        setError(data.error || \"AI transformation failed\");\n        return;\n      }\n      const data = await res.json();\n      if (action === \"tldr\") {\n        setContent(data.result + \"\\n\\n---\\n\\n\" + content);\n      } else {\n        setContent(data.result);\n      }\n    } finally {\n      setAiLoading(null);\n    }\n  };\n\n  const handlePublish = async (platform: \"beehiiv\" | \"substack\" | \"kit\") => {\n    if (!user || !draft) return;\n    setPublishing(true);\n    setError(null);\n    try {\n      const res = await fetch(\"/api/publish\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ draftId: draft.id, platform }),\n      });\n      if (!res.ok) {\n        const data = await res.json().catch(() => ({}));\n        setError(data.error || \"Failed to publish\");\n        return;\n      }\n      await updateStatus(\"published\");\n      setPublishModalOpen(false);\n      router.push(\"/dashboard/drafts\");\n    } finally {\n      setPublishing(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex flex-col lg:flex-row gap-6 h-[calc(100vh-10rem)]\">\n        <div className=\"flex-1 bg-gray-100 rounded-xl animate-pulse\" />\n        <div className=\"w-full lg:w-80 bg-gray-100 rounded-xl animate-pulse\" />\n      </div>\n    );\n  }\n\n  if (!draft) {\n    return (\n      <div className=\"text-center py-16\">\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-1\">Draft not found</h3>\n        <p className=\"text-sm text-gray-500 mb-6\">This draft may have been deleted.</p>\n        <Button onClick={() => router.push(\"/dashboard/drafts\")}>Back to Drafts</Button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex flex-col lg:flex-row gap-6 h-[calc(100vh-10rem)]\">\n      {/* Editor panel */}\n      <div className=\"flex-1 flex flex-col bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden\">\n        <div className=\"flex items-center justify-between px-4 py-3 border-b border-gray-100\">\n          <div className=\"flex items-center gap-3\">\n            <Badge variant={DRAFT_STATUS_MAP[draft.status]?.variant || \"default\"}>\n              {DRAFT_STATUS_MAP[draft.status]?.label || draft.status}\n            </Badge>\n            <span className=\"text-sm text-gray-400\">\n              {countWords(content)} words\n            </span>\n            {saveStatus === \"saving\" && (\n              <span className=\"text-xs text-amber-500\">Saving...</span>\n            )}\n            {saveStatus === \"saved\" && (\n              <span className=\"text-xs text-green-500\">Saved</span>\n            )}\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <Button variant=\"ghost\" size=\"sm\" onClick={() => router.push(\"/dashboard/drafts\")}>\n              Back\n            </Button>\n            <Button size=\"sm\" onClick={() => setPublishModalOpen(true)}>\n              Publish\n              <svg className=\"w-4 h-4 ml-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 7l5 5m0 0l-5 5m5-5H6\" />\n              </svg>\n            </Button>\n          </div>\n        </div>\n        <textarea\n          value={content}\n          onChange={(e) => setContent(e.target.value)}\n          className=\"flex-1 p-6 text-sm text-gray-800 leading-relaxed resize-none focus:outline-none font-mono\"\n          placeholder=\"Start writing your newsletter...\"\n        />\n      </div>\n\n      {/* AI Assist sidebar */}\n      <div className=\"w-full lg:w-80 flex flex-col gap-4 shrink-0\">\n        {/* AI Actions */}\n        <div className=\"bg-white rounded-xl border border-gray-200 shadow-sm p-4\">\n          <h3 className=\"text-sm font-semibold text-gray-900 mb-3\">AI Assist</h3>\n          <div className=\"space-y-2\">\n            <button\n              onClick={() => handleAiTransform(\"rewrite\")}\n              disabled={aiLoading !== null}\n              className=\"w-full flex items-center gap-2 px-3 py-2.5 rounded-lg text-sm text-left hover:bg-indigo-50 text-gray-700 hover:text-indigo-700 transition-colors cursor-pointer disabled:opacity-50\"\n            >\n              <svg className=\"w-4 h-4 text-indigo-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n              </svg>\n              {aiLoading === \"rewrite\" ? \"Rewriting...\" : \"Rewrite in my style\"}\n            </button>\n            <button\n              onClick={() => handleAiTransform(\"shorten\")}\n              disabled={aiLoading !== null}\n              className=\"w-full flex items-center gap-2 px-3 py-2.5 rounded-lg text-sm text-left hover:bg-indigo-50 text-gray-700 hover:text-indigo-700 transition-colors cursor-pointer disabled:opacity-50\"\n            >\n              <svg className=\"w-4 h-4 text-indigo-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6h16M4 12h8m-8 6h16\" />\n              </svg>\n              {aiLoading === \"shorten\" ? \"Shortening...\" : \"Make it shorter\"}\n            </button>\n            <button\n              onClick={handleGenerateSubjectLines}\n              disabled={subjectLoading}\n              className=\"w-full flex items-center gap-2 px-3 py-2.5 rounded-lg text-sm text-left hover:bg-indigo-50 text-gray-700 hover:text-indigo-700 transition-colors cursor-pointer disabled:opacity-50\"\n            >\n              <svg className=\"w-4 h-4 text-indigo-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n              </svg>\n              {subjectLoading ? \"Generating...\" : \"Generate subject lines\"}\n            </button>\n            <button\n              onClick={() => handleAiTransform(\"tldr\")}\n              disabled={aiLoading !== null}\n              className=\"w-full flex items-center gap-2 px-3 py-2.5 rounded-lg text-sm text-left hover:bg-indigo-50 text-gray-700 hover:text-indigo-700 transition-colors cursor-pointer disabled:opacity-50\"\n            >\n              <svg className=\"w-4 h-4 text-indigo-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\n              </svg>\n              {aiLoading === \"tldr\" ? \"Generating...\" : \"Add TL;DR summary\"}\n            </button>\n          </div>\n        </div>\n\n        {/* Source articles */}\n        <div className=\"bg-white rounded-xl border border-gray-200 shadow-sm p-4 flex-1 overflow-auto\">\n          <h3 className=\"text-sm font-semibold text-gray-900 mb-3\">\n            Source Articles ({sourceArticles.length})\n          </h3>\n          {sourceArticles.length === 0 ? (\n            <p className=\"text-xs text-gray-400\">No source articles linked to this draft.</p>\n          ) : (\n            <div className=\"space-y-3\">\n              {sourceArticles.map((article) => (\n                <a\n                  key={article.id}\n                  href={article.source_url}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"block p-3 rounded-lg bg-gray-50 hover:bg-indigo-50 cursor-pointer transition-colors\"\n                >\n                  <p className=\"text-xs font-medium text-gray-900 leading-snug line-clamp-2\">\n                    {article.title}\n                  </p>\n                  <div className=\"flex items-center gap-2 mt-1.5\">\n                    <span className=\"text-xs text-gray-400\">{article.source}</span>\n                    <span className=\"text-xs text-indigo-500 font-medium\">\n                      {article.relevance_score}%\n                    </span>\n                  </div>\n                </a>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Error banner */}\n      {error && (\n        <div className=\"fixed bottom-4 right-4 z-50 max-w-sm bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl shadow-lg flex items-center gap-3\">\n          <span className=\"text-sm flex-1\">{error}</span>\n          <button onClick={() => setError(null)} className=\"text-red-400 hover:text-red-600 cursor-pointer shrink-0\">\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n      )}\n\n      {/* Subject Lines Modal */}\n      <Modal isOpen={subjectModalOpen} onClose={() => setSubjectModalOpen(false)} title=\"Subject Line Suggestions\">\n        <div className=\"space-y-2\">\n          {subjectLines.map((line, i) => (\n            <div\n              key={i}\n              className=\"px-4 py-3 rounded-xl border border-gray-200 hover:border-indigo-300 hover:bg-indigo-50 transition-colors cursor-pointer text-sm text-gray-900\"\n              onClick={() => {\n                navigator.clipboard.writeText(line);\n                setSubjectModalOpen(false);\n              }}\n            >\n              {line}\n            </div>\n          ))}\n          <p className=\"text-xs text-gray-400 mt-2\">Click to copy to clipboard</p>\n        </div>\n      </Modal>\n\n      {/* Publish Modal */}\n      <Modal isOpen={publishModalOpen} onClose={() => setPublishModalOpen(false)} title=\"Publish Newsletter\">\n        <div className=\"space-y-2\">\n          <p className=\"text-sm text-gray-500 mb-3\">Choose a platform to publish:</p>\n          {([\"beehiiv\", \"substack\", \"kit\"] as const).map((platform) => (\n            <button\n              key={platform}\n              onClick={() => handlePublish(platform)}\n              disabled={publishing}\n              className=\"w-full text-left px-4 py-3 rounded-xl border border-gray-200 hover:border-indigo-300 hover:bg-indigo-50 transition-colors cursor-pointer disabled:opacity-50\"\n            >\n              <span className=\"text-sm font-medium text-gray-900 capitalize\">{platform}</span>\n            </button>\n          ))}\n        </div>\n      </Modal>\n    </div>\n  );\n}\n","\"use client\";\n\nimport { useState, useEffect, useCallback, useRef } from \"react\";\nimport { useUser } from \"./useUser\";\nimport type { Draft, Article } from \"@/lib/database.types\";\nimport { TIMING } from \"@/lib/constants\";\nimport { countWords } from \"@/lib/utils\";\n\nexport function useDraft(draftId: string) {\n  const { supabase, user } = useUser();\n  const [draft, setDraft] = useState<Draft | null>(null);\n  const [sourceArticles, setSourceArticles] = useState<Article[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [saveStatus, setSaveStatus] = useState<\"idle\" | \"saving\" | \"saved\">(\"idle\");\n  const [error, setError] = useState<string | null>(null);\n  const saveTimer = useRef<ReturnType<typeof setTimeout>>(undefined);\n  const [refreshKey, setRefreshKey] = useState(0);\n\n  useEffect(() => {\n    if (!user || !draftId) return;\n    let active = true;\n\n    (async () => {\n      try {\n        const { data: draftData, error: draftError } = await supabase\n          .from(\"drafts\")\n          .select(\"*\")\n          .eq(\"id\", draftId)\n          .eq(\"user_id\", user.id)\n          .single();\n\n        if (!active) return;\n        if (draftError) throw draftError;\n        if (draftData) setDraft(draftData);\n\n        const { data: junctionData } = await supabase\n          .from(\"draft_articles\")\n          .select(\"*, articles(*)\")\n          .eq(\"draft_id\", draftId);\n\n        if (!active) return;\n        if (junctionData) {\n          const articles = junctionData\n            .map((j) => (j as Record<string, unknown>).articles as Article)\n            .filter(Boolean);\n          setSourceArticles(articles);\n        }\n\n        setError(null);\n      } catch (err) {\n        if (!active) return;\n        setError(err instanceof Error ? err.message : \"Failed to load draft\");\n      } finally {\n        if (active) setLoading(false);\n      }\n    })();\n\n    return () => {\n      active = false;\n      if (saveTimer.current) clearTimeout(saveTimer.current);\n    };\n  }, [supabase, user, draftId, refreshKey]);\n\n  const saveDraft = useCallback(\n    async (content: string) => {\n      if (!draftId || !user) return;\n      setSaveStatus(\"saving\");\n      const wordCount = countWords(content);\n      await supabase\n        .from(\"drafts\")\n        .update({ content, word_count: wordCount })\n        .eq(\"id\", draftId)\n        .eq(\"user_id\", user.id);\n      setSaveStatus(\"saved\");\n      setTimeout(() => setSaveStatus(\"idle\"), TIMING.SAVE_DISPLAY_MS);\n    },\n    [supabase, draftId, user]\n  );\n\n  const debouncedSave = useCallback(\n    (content: string) => {\n      if (saveTimer.current) clearTimeout(saveTimer.current);\n      saveTimer.current = setTimeout(() => saveDraft(content), TIMING.DEBOUNCE_MS);\n    },\n    [saveDraft]\n  );\n\n  const updateStatus = async (status: Draft[\"status\"]) => {\n    if (!user) return;\n    await supabase.from(\"drafts\").update({ status }).eq(\"id\", draftId).eq(\"user_id\", user.id);\n    setDraft((prev) => (prev ? { ...prev, status } : null));\n  };\n\n  const refresh = () => {\n    setLoading(true);\n    setRefreshKey((k) => k + 1);\n  };\n\n  return {\n    draft,\n    sourceArticles,\n    loading,\n    error,\n    saveStatus,\n    saveDraft,\n    debouncedSave,\n    updateStatus,\n    refresh,\n  };\n}\n"],"names":[],"mappings":"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"}