{"version":3,"sources":["../../../../../../../Desktop/Projects/LetterFlow/src/components/ui/Badge.tsx","../../../../../../../Desktop/Projects/LetterFlow/src/hooks/useUser.ts","../../../../../../../Desktop/Projects/LetterFlow/src/components/ui/Button.tsx","../../../../../../../Desktop/Projects/LetterFlow/src/components/ui/Modal.tsx","../../../../../../../Desktop/Projects/LetterFlow/src/lib/utils.ts","../../../../../../../Desktop/Projects/LetterFlow/src/hooks/useTopics.ts","../../../../../../../Desktop/Projects/LetterFlow/src/app/dashboard/feed/page.tsx","../../../../../../../Desktop/Projects/LetterFlow/src/components/feed/FeedCard.tsx","../../../../../../../Desktop/Projects/LetterFlow/src/hooks/useArticles.ts"],"sourcesContent":["type BadgeVariant = \"default\" | \"success\" | \"warning\" | \"info\" | \"purple\";\n\ninterface BadgeProps {\n  children: React.ReactNode;\n  variant?: BadgeVariant;\n  className?: string;\n}\n\nconst variantClasses: Record<BadgeVariant, string> = {\n  default: \"bg-gray-100 text-gray-700\",\n  success: \"bg-green-100 text-green-700\",\n  warning: \"bg-amber-100 text-amber-700\",\n  info: \"bg-blue-100 text-blue-700\",\n  purple: \"bg-indigo-100 text-indigo-700\",\n};\n\nexport default function Badge({\n  children,\n  variant = \"default\",\n  className = \"\",\n}: BadgeProps) {\n  return (\n    <span\n      className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${variantClasses[variant]} ${className}`}\n    >\n      {children}\n    </span>\n  );\n}\n","\"use client\";\n\nimport { useState, useEffect, useMemo } from \"react\";\nimport { createBrowserSupabaseClient } from \"@/lib/supabase\";\nimport type { User } from \"@supabase/supabase-js\";\n\nexport function useUser() {\n  const supabase = useMemo(() => createBrowserSupabaseClient(), []);\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    supabase.auth.getUser().then(({ data }) => {\n      setUser(data.user);\n      setLoading(false);\n    });\n\n    const {\n      data: { subscription },\n    } = supabase.auth.onAuthStateChange((_event, session) => {\n      setUser(session?.user ?? null);\n    });\n\n    return () => subscription.unsubscribe();\n  }, [supabase]);\n\n  return { supabase, user, loading };\n}\n","import { ButtonHTMLAttributes } from \"react\";\n\ntype Variant = \"primary\" | \"secondary\" | \"ghost\";\ntype Size = \"sm\" | \"md\" | \"lg\";\n\ninterface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: Variant;\n  size?: Size;\n}\n\nconst variantClasses: Record<Variant, string> = {\n  primary:\n    \"bg-gradient-to-r from-indigo-600 to-violet-600 text-white hover:from-indigo-700 hover:to-violet-700 shadow-md shadow-indigo-200 hover:shadow-lg hover:shadow-indigo-300 active:scale-[0.98]\",\n  secondary:\n    \"bg-white text-gray-700 border border-gray-200 hover:border-indigo-300 hover:text-indigo-600 shadow-sm hover:shadow-md active:scale-[0.98]\",\n  ghost: \"text-gray-600 hover:text-indigo-600 hover:bg-indigo-50\",\n};\n\nconst sizeClasses: Record<Size, string> = {\n  sm: \"px-3.5 py-1.5 text-sm gap-1.5\",\n  md: \"px-5 py-2.5 text-sm gap-2\",\n  lg: \"px-7 py-3.5 text-base gap-2\",\n};\n\nexport default function Button({\n  variant = \"primary\",\n  size = \"md\",\n  className = \"\",\n  children,\n  ...props\n}: ButtonProps) {\n  return (\n    <button\n      className={`inline-flex items-center justify-center font-semibold rounded-xl transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer ${variantClasses[variant]} ${sizeClasses[size]} ${className}`}\n      {...props}\n    >\n      {children}\n    </button>\n  );\n}\n","\"use client\";\n\nimport { useEffect } from \"react\";\n\ninterface ModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  title: string;\n  children: React.ReactNode;\n}\n\nexport default function Modal({ isOpen, onClose, title, children }: ModalProps) {\n  useEffect(() => {\n    const handleEsc = (e: KeyboardEvent) => {\n      if (e.key === \"Escape\") onClose();\n    };\n    if (isOpen) {\n      document.addEventListener(\"keydown\", handleEsc);\n      document.body.style.overflow = \"hidden\";\n    }\n    return () => {\n      document.removeEventListener(\"keydown\", handleEsc);\n      document.body.style.overflow = \"\";\n    };\n  }, [isOpen, onClose]);\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\n      <div className=\"fixed inset-0 bg-gray-900/60 backdrop-blur-sm\" onClick={onClose} />\n      <div className=\"relative w-full max-w-lg mx-4 bg-white rounded-2xl shadow-2xl border border-gray-200 max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex items-center justify-between px-6 py-4 border-b border-gray-100\">\n          <h2 className=\"text-lg font-semibold text-gray-900\">{title}</h2>\n          <button\n            onClick={onClose}\n            className=\"p-1.5 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer\"\n          >\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n        <div className=\"px-6 py-5\">{children}</div>\n      </div>\n    </div>\n  );\n}\n","export function formatDate(dateStr: string): string {\n  const date = new Date(dateStr);\n  const now = new Date();\n  const diffMs = now.getTime() - date.getTime();\n  const diffH = Math.floor(diffMs / (1000 * 60 * 60));\n  if (diffH < 1) return \"Just now\";\n  if (diffH < 24) return `${diffH}h ago`;\n  const diffD = Math.floor(diffH / 24);\n  if (diffD < 7) return `${diffD}d ago`;\n  return date.toLocaleDateString(\"en-US\", { month: \"short\", day: \"numeric\" });\n}\n\nexport function countWords(content: string): number {\n  if (!content || !content.trim()) return 0;\n  return content.trim().split(/\\s+/).filter(Boolean).length;\n}\n","\"use client\";\n\nimport { useState, useEffect, useCallback } from \"react\";\nimport { useUser } from \"./useUser\";\nimport type { Topic } from \"@/lib/database.types\";\n\nexport type TopicWithCount = Topic & { article_count: number };\n\nexport function useTopics() {\n  const { supabase, user } = useUser();\n  const [topics, setTopics] = useState<TopicWithCount[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [refreshKey, setRefreshKey] = useState(0);\n\n  useEffect(() => {\n    if (!user) return;\n    let active = true;\n\n    (async () => {\n      try {\n        const { data, error: queryError } = await supabase\n          .from(\"topics\")\n          .select(\"*, articles(count)\")\n          .eq(\"user_id\", user.id)\n          .order(\"created_at\", { ascending: false });\n\n        if (!active) return;\n        if (queryError) throw queryError;\n\n        const mapped = (data || []).map((t) => ({\n          ...t,\n          article_count: (t as Record<string, unknown>).articles\n            ? ((t as Record<string, unknown>).articles as { count: number }[])[0]?.count ?? 0\n            : 0,\n        })) as TopicWithCount[];\n\n        setTopics(mapped);\n        setError(null);\n      } catch (err) {\n        if (!active) return;\n        setError(err instanceof Error ? err.message : \"Failed to load topics\");\n      } finally {\n        if (active) setLoading(false);\n      }\n    })();\n\n    return () => { active = false; };\n  }, [supabase, user, refreshKey]);\n\n  const refresh = useCallback(() => {\n    setLoading(true);\n    setRefreshKey((k) => k + 1);\n  }, []);\n\n  const addTopic = async (data: {\n    name: string;\n    keywords: string[];\n    rss_urls: string[];\n    category: string;\n    is_active: boolean;\n  }) => {\n    if (!user) return;\n    const { error } = await supabase.from(\"topics\").insert({\n      user_id: user.id,\n      ...data,\n    });\n    if (!error) refresh();\n    return error;\n  };\n\n  const updateTopic = async (\n    id: string,\n    data: Partial<{\n      name: string;\n      keywords: string[];\n      rss_urls: string[];\n      category: string;\n      is_active: boolean;\n    }>\n  ) => {\n    if (!user) return;\n    const { error } = await supabase.from(\"topics\").update(data).eq(\"id\", id).eq(\"user_id\", user.id);\n    if (!error) refresh();\n    return error;\n  };\n\n  const deleteTopic = async (id: string) => {\n    if (!user) return;\n    const { error } = await supabase.from(\"topics\").delete().eq(\"id\", id).eq(\"user_id\", user.id);\n    if (!error) refresh();\n    return error;\n  };\n\n  return { topics, loading, error, addTopic, updateTopic, deleteTopic, refresh };\n}\n","\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Button from \"@/components/ui/Button\";\nimport Input from \"@/components/ui/Input\";\nimport FeedCard from \"@/components/feed/FeedCard\";\nimport Modal from \"@/components/ui/Modal\";\nimport { useArticles } from \"@/hooks/useArticles\";\nimport { useTopics } from \"@/hooks/useTopics\";\nimport { useUser } from \"@/hooks/useUser\";\n\nexport default function FeedPage() {\n  const { articles, categories, loading, filters, setFilters, toggleBookmark, curate, curateLoading } = useArticles();\n  const { topics } = useTopics();\n  const { user } = useUser();\n  const router = useRouter();\n  const [searchInput, setSearchInput] = useState(\"\");\n  const [curateModalOpen, setCurateModalOpen] = useState(false);\n  const [selectedArticles, setSelectedArticles] = useState<string[]>([]);\n  const [error, setError] = useState<string | null>(null);\n\n  // Debounce search\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setFilters((prev) => ({ ...prev, search: searchInput }));\n    }, 300);\n    return () => clearTimeout(timer);\n  }, [searchInput, setFilters]);\n\n  const handleCurate = async (topicId: string) => {\n    setCurateModalOpen(false);\n    await curate(topicId);\n  };\n\n  const handleGenerateDraft = async () => {\n    if (!user || selectedArticles.length === 0) return;\n    setError(null);\n    const res = await fetch(\"/api/generate-draft\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ articleIds: selectedArticles }),\n    });\n    if (!res.ok) {\n      const data = await res.json().catch(() => ({}));\n      setError(data.error || \"Failed to generate draft\");\n      return;\n    }\n    const { draft } = await res.json();\n    router.push(`/dashboard/drafts/${draft.id}`);\n  };\n\n  const toggleSelectArticle = (id: string) => {\n    setSelectedArticles((prev) =>\n      prev.includes(id) ? prev.filter((a) => a !== id) : [...prev, id]\n    );\n  };\n\n  const allCategories = [\"All\", ...categories];\n\n  if (loading) {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"h-5 w-48 bg-gray-200 rounded animate-pulse\" />\n          <div className=\"h-10 w-32 bg-gray-200 rounded-xl animate-pulse\" />\n        </div>\n        <div className=\"space-y-4\">\n          {[1, 2, 3].map((i) => (\n            <div key={i} className=\"h-40 bg-gray-100 rounded-2xl animate-pulse\" />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4\">\n        <div>\n          <p className=\"text-sm text-gray-500\">\n            {articles.length} articles curated\n          </p>\n        </div>\n        <div className=\"flex items-center gap-3 w-full sm:w-auto\">\n          <div className=\"flex-1 sm:w-64\">\n            <Input\n              placeholder=\"Filter articles...\"\n              value={searchInput}\n              onChange={(e) => setSearchInput(e.target.value)}\n              icon={\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n                </svg>\n              }\n            />\n          </div>\n          <Button onClick={() => setCurateModalOpen(true)} disabled={curateLoading}>\n            <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n            </svg>\n            {curateLoading ? \"Curating...\" : \"Refresh\"}\n          </Button>\n        </div>\n      </div>\n\n      {/* Error banner */}\n      {error && (\n        <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl flex items-center gap-3\">\n          <span className=\"text-sm flex-1\">{error}</span>\n          <button onClick={() => setError(null)} className=\"text-red-400 hover:text-red-600 cursor-pointer\">\n            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n        </div>\n      )}\n\n      {/* Category filters */}\n      <div className=\"flex flex-wrap gap-2\">\n        {allCategories.map((cat) => (\n          <button\n            key={cat}\n            onClick={() => setFilters((prev) => ({ ...prev, category: cat }))}\n            className={`px-3 py-1.5 rounded-full text-sm font-medium transition-colors cursor-pointer ${\n              filters.category === cat\n                ? \"bg-indigo-600 text-white\"\n                : \"bg-white text-gray-600 border border-gray-200 hover:border-indigo-300 hover:text-indigo-600\"\n            }`}\n          >\n            {cat}\n          </button>\n        ))}\n      </div>\n\n      {/* Selected articles bar */}\n      {selectedArticles.length > 0 && (\n        <div className=\"flex items-center justify-between bg-indigo-50 border border-indigo-200 rounded-xl px-4 py-3\">\n          <span className=\"text-sm font-medium text-indigo-700\">\n            {selectedArticles.length} article{selectedArticles.length > 1 ? \"s\" : \"\"} selected\n          </span>\n          <div className=\"flex gap-2\">\n            <Button variant=\"ghost\" size=\"sm\" onClick={() => setSelectedArticles([])}>\n              Clear\n            </Button>\n            <Button size=\"sm\" onClick={handleGenerateDraft}>\n              Generate Draft\n            </Button>\n          </div>\n        </div>\n      )}\n\n      {articles.length === 0 ? (\n        <div className=\"text-center py-16\">\n          <div className=\"w-16 h-16 bg-indigo-50 rounded-2xl flex items-center justify-center mx-auto mb-4\">\n            <svg className=\"w-8 h-8 text-indigo-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z\" />\n            </svg>\n          </div>\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-1\">No articles yet</h3>\n          <p className=\"text-sm text-gray-500 mb-6\">Run AI curation on a topic to start discovering content.</p>\n          <Button onClick={() => setCurateModalOpen(true)}>Run AI Curation</Button>\n        </div>\n      ) : (\n        <div className=\"space-y-4\">\n          {articles.map((article) => (\n            <FeedCard\n              key={article.id}\n              article={article}\n              onBookmark={toggleBookmark}\n              onAddToDraft={toggleSelectArticle}\n            />\n          ))}\n        </div>\n      )}\n\n      {/* Curate topic selection modal */}\n      <Modal isOpen={curateModalOpen} onClose={() => setCurateModalOpen(false)} title=\"Select Topic to Curate\">\n        {topics.length === 0 ? (\n          <p className=\"text-sm text-gray-500\">No topics available. Add a topic first.</p>\n        ) : (\n          <div className=\"space-y-2\">\n            <p className=\"text-sm text-gray-500 mb-3\">Choose a topic to fetch and analyze new articles:</p>\n            {topics.filter((t) => t.is_active).map((topic) => (\n              <button\n                key={topic.id}\n                onClick={() => handleCurate(topic.id)}\n                className=\"w-full text-left px-4 py-3 rounded-xl border border-gray-200 hover:border-indigo-300 hover:bg-indigo-50 transition-colors cursor-pointer\"\n              >\n                <span className=\"text-sm font-medium text-gray-900\">{topic.name}</span>\n                <span className=\"ml-2 text-xs text-gray-400\">{topic.keywords.slice(0, 3).join(\", \")}</span>\n              </button>\n            ))}\n          </div>\n        )}\n      </Modal>\n    </div>\n  );\n}\n","\"use client\";\n\nimport Badge from \"@/components/ui/Badge\";\nimport type { Article } from \"@/lib/database.types\";\nimport { formatDate } from \"@/lib/utils\";\n\ninterface FeedCardProps {\n  article: Article & { topic_name: string };\n  onBookmark: (id: string) => void;\n  onAddToDraft?: (id: string) => void;\n}\n\nexport default function FeedCard({ article, onBookmark, onAddToDraft }: FeedCardProps) {\n  const scoreColor =\n    article.relevance_score >= 90\n      ? \"from-emerald-500 to-teal-500 text-white\"\n      : article.relevance_score >= 80\n        ? \"from-blue-500 to-cyan-500 text-white\"\n        : \"from-gray-100 to-gray-200 text-gray-600\";\n\n  return (\n    <div className=\"group bg-white rounded-2xl border border-gray-100 shadow-sm p-5 hover:shadow-lg hover:border-indigo-100 transition-all duration-300\">\n      <div className=\"flex items-start justify-between gap-4\">\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"flex items-center gap-2 mb-2.5\">\n            <Badge variant=\"purple\">{article.topic_name || \"Uncategorized\"}</Badge>\n            <span className=\"text-xs text-gray-400\">\n              {article.published_at ? formatDate(article.published_at) : \"\"}\n            </span>\n          </div>\n          <h3 className=\"text-base font-bold text-gray-900 leading-snug group-hover:text-indigo-700 transition-colors\">\n            {article.title}\n          </h3>\n          <p className=\"mt-2 text-sm text-gray-500 leading-relaxed line-clamp-2\">\n            {article.summary}\n          </p>\n          <div className=\"mt-3 flex items-center gap-2\">\n            <div className=\"w-4 h-4 bg-gray-100 rounded-full\" />\n            <span className=\"text-xs font-medium text-gray-500\">{article.source}</span>\n          </div>\n        </div>\n        <div className=\"flex flex-col items-center gap-2 shrink-0\">\n          <div className={`w-13 h-13 rounded-xl bg-gradient-to-br ${scoreColor} flex items-center justify-center shadow-md`}>\n            <span className=\"text-sm font-extrabold\">{article.relevance_score}</span>\n          </div>\n          <button\n            onClick={() => onBookmark(article.id)}\n            className={`p-1.5 rounded-lg transition-all cursor-pointer ${\n              article.is_bookmarked\n                ? \"text-indigo-600 bg-indigo-50\"\n                : \"text-gray-300 hover:text-indigo-400 hover:bg-indigo-50\"\n            }`}\n          >\n            <svg className=\"w-5 h-5\" fill={article.is_bookmarked ? \"currentColor\" : \"none\"} stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z\" />\n            </svg>\n          </button>\n        </div>\n      </div>\n\n      <div className=\"mt-4 pt-3 border-t border-gray-50 flex items-center gap-1.5\">\n        <button\n          onClick={() => onAddToDraft?.(article.id)}\n          className=\"text-xs font-medium px-3 py-1.5 rounded-lg transition-all text-gray-500 hover:text-indigo-600 hover:bg-indigo-50 cursor-pointer\"\n        >\n          Add to Draft\n        </button>\n        <a\n          href={article.source_url}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"text-xs font-medium px-3 py-1.5 rounded-lg transition-all text-gray-500 hover:text-indigo-600 hover:bg-indigo-50\"\n        >\n          View Original\n        </a>\n      </div>\n    </div>\n  );\n}\n","\"use client\";\n\nimport { useState, useEffect, useCallback } from \"react\";\nimport { useUser } from \"./useUser\";\nimport type { Article } from \"@/lib/database.types\";\n\nexport type ArticleWithTopic = Article & { topic_name: string };\n\ninterface Filters {\n  category: string;\n  search: string;\n}\n\nexport function useArticles() {\n  const { supabase, user } = useUser();\n  const [articles, setArticles] = useState<ArticleWithTopic[]>([]);\n  const [categories, setCategories] = useState<string[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [filters, setFilters] = useState<Filters>({ category: \"All\", search: \"\" });\n  const [curateLoading, setCurateLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [refreshKey, setRefreshKey] = useState(0);\n\n  useEffect(() => {\n    if (!user) return;\n    let active = true;\n\n    (async () => {\n      try {\n        let query = supabase\n          .from(\"articles\")\n          .select(\"*, topics(name, category)\")\n          .eq(\"user_id\", user.id)\n          .order(\"relevance_score\", { ascending: false });\n\n        if (filters.search) {\n          query = query.ilike(\"title\", `%${filters.search}%`);\n        }\n\n        const { data, error: queryError } = await query;\n        if (!active) return;\n        if (queryError) throw queryError;\n\n        let mapped = (data || []).map((a) => {\n          const topic = (a as Record<string, unknown>).topics as { name: string; category: string } | null;\n          return {\n            ...a,\n            topic_name: topic?.name ?? \"\",\n            _category: topic?.category ?? \"\",\n          };\n        });\n\n        const uniqueCats = [...new Set(mapped.map((a) => a._category).filter(Boolean))];\n        setCategories(uniqueCats);\n\n        if (filters.category !== \"All\") {\n          mapped = mapped.filter((a) => a._category === filters.category);\n        }\n\n        setArticles(mapped as unknown as ArticleWithTopic[]);\n        setError(null);\n      } catch (err) {\n        if (!active) return;\n        setError(err instanceof Error ? err.message : \"Failed to load articles\");\n      } finally {\n        if (active) setLoading(false);\n      }\n    })();\n\n    return () => { active = false; };\n  }, [supabase, user, filters, refreshKey]);\n\n  const refresh = useCallback(() => {\n    setLoading(true);\n    setRefreshKey((k) => k + 1);\n  }, []);\n\n  const toggleBookmark = async (id: string) => {\n    const article = articles.find((a) => a.id === id);\n    if (!article || !user) return;\n\n    setArticles((prev) =>\n      prev.map((a) => (a.id === id ? { ...a, is_bookmarked: !a.is_bookmarked } : a))\n    );\n\n    const { error } = await supabase\n      .from(\"articles\")\n      .update({ is_bookmarked: !article.is_bookmarked })\n      .eq(\"id\", id)\n      .eq(\"user_id\", user.id);\n\n    if (error) {\n      setArticles((prev) =>\n        prev.map((a) => (a.id === id ? { ...a, is_bookmarked: article.is_bookmarked } : a))\n      );\n    }\n  };\n\n  const curate = async (topicId: string) => {\n    if (!user) return;\n    setCurateLoading(true);\n    setError(null);\n    try {\n      const res = await fetch(\"/api/curate\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ topicId }),\n      });\n      if (!res.ok) {\n        const data = await res.json().catch(() => ({}));\n        setError(data.error || \"Failed to curate articles\");\n        return;\n      }\n      refresh();\n    } finally {\n      setCurateLoading(false);\n    }\n  };\n\n  return {\n    articles,\n    categories,\n    loading,\n    error,\n    filters,\n    setFilters,\n    toggleBookmark,\n    curate,\n    curateLoading,\n    refresh,\n  };\n}\n"],"names":[],"mappings":"wDAQA,IAAM,EAA+C,CACnD,QAAS,4BACT,QAAS,8BACT,QAAS,8BACT,KAAM,4BACN,OAAQ,+BACV,EAEe,SAAS,EAAM,UAC5B,CAAQ,CACR,UAAU,SAAS,WACnB,EAAY,EAAE,CACH,EACX,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CACC,UAAW,CAAC,wEAAwE,EAAE,CAAc,CAAC,EAAQ,CAAC,CAAC,EAAE,EAAA,CAAW,UAE3H,GAGP,gDC1BA,IAAA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OAGO,SAAS,IACd,IAAM,EAAW,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,IAAM,CAAA,EAAA,EAAA,2BAAA,AAA2B,IAAI,EAAE,EAC1D,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAsB,MACxC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAiBvC,MAfA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,EAAS,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,CAAC,MAAE,CAAI,CAAE,IACpC,EAAQ,EAAK,IAAI,EACjB,GAAW,EACb,GAEA,GAAM,CACJ,KAAM,cAAE,CAAY,CAAE,CACvB,CAAG,EAAS,IAAI,CAAC,iBAAiB,CAAC,CAAC,EAAQ,KAC3C,EAAQ,GAAS,MAAQ,KAC3B,GAEA,MAAO,IAAM,EAAa,WAAW,EACvC,EAAG,CAAC,EAAS,EAEN,UAAE,OAAU,UAAM,CAAQ,CACnC,iECjBA,IAAM,EAA0C,CAC9C,QACE,8LACF,UACE,4IACF,MAAO,wDACT,EAEM,EAAoC,CACxC,GAAI,gCACJ,GAAI,4BACJ,GAAI,6BACN,EAEe,SAAS,EAAO,SAC7B,EAAU,SAAS,CACnB,OAAO,IAAI,CACX,YAAY,EAAE,UACd,CAAQ,CACR,GAAG,EACS,EACZ,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,UAAW,CAAC,sOAAsO,EAAE,CAAc,CAAC,EAAQ,CAAC,CAAC,EAAE,CAAW,CAAC,EAAK,CAAC,CAAC,EAAE,EAAA,CAAW,CAC9S,GAAG,CAAK,UAER,GAGP,iECrCA,EAAA,EAAA,CAAA,CAAA,MASe,SAAS,EAAM,QAAE,CAAM,SAAE,CAAO,OAAE,CAAK,CAAE,UAAQ,CAAc,QAe5E,CAdA,CAAA,EAcI,AAdJ,EAAA,SAAS,AAAT,EAAU,KACR,IAAM,EAAY,AAAC,IACH,WAAV,EAAE,GAAG,EAAe,GAC1B,EAKA,OAJI,IACF,IADU,KACD,gBAAgB,CAAC,UAAW,GACrC,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAG,UAE1B,KACL,SAAS,mBAAmB,CAAC,UAAW,GACxC,SAAS,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAG,EACjC,CACF,EAAG,CAAC,EAAQ,EAAQ,EAEf,GAGH,CAAA,EAAA,EAHW,AAGX,IAAA,EAAC,MAAA,CAAI,UAAU,gEACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gDAAgD,QAAS,IACxE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8HACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iFACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+CAAuC,IACrD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,UAAU,iHAEV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,UAAU,KAAK,OAAO,OAAO,eAAe,QAAQ,qBACjE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,gCAI3E,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBAAa,UAjBd,IAqBtB,gDC/CO,SAAS,EAAW,CAAe,EACxC,IAAM,EAAO,IAAI,KAAK,GAGhB,EAAQ,KAAK,KAAK,CAAC,CAFb,AACG,IADC,IAEkB,GADf,OAAO,GAAK,EAAK,OAAO,EAAA,EACR,MACnC,CAD0C,EACtC,EAAQ,CADmC,CAChC,CADkC,KAC3B,WACtB,GAAI,EAAQ,GAAI,MAAO,CAAA,EAAG,EAAM,KAAK,CAAC,CACtC,IAAM,EAAQ,KAAK,KAAK,CAAC,EAAQ,WACjC,AAAI,EAAQ,EAAU,CAAP,AAAO,EAAG,EAAM,KAAK,CAAC,CAC9B,EAAK,kBAAkB,CAAC,QAAS,CAAE,MAAO,QAAS,IAAK,SAAU,EAC3E,CAEO,SAAS,EAAW,CAAe,SACxC,AAAI,AAAC,GAAY,EAAQ,IAAI,EAAb,CACT,CAD0B,CAClB,IAAI,GAAG,KAAK,CAAC,OAAO,MAAM,CAAC,SAAS,MAAM,CADjB,CAE1C,sECbA,IAAA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OAKO,SAAS,IACd,GAAM,UAAE,CAAQ,MAAE,CAAI,CAAE,CAAG,CAAA,EAAA,EAAA,OAAA,AAAO,IAC5B,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAmB,EAAE,EACnD,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAC5C,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,GAE7C,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GAAI,CAAC,EAAM,OACX,IAAI,GAAS,EA8Bb,MA5BA,CAAC,UACC,GAAI,CACF,GAAM,MAAE,CAAI,CAAE,MAAO,CAAU,CAAE,CAAG,MAAM,EACvC,IAAI,CAAC,UACL,MAAM,CAAC,sBACP,EAAE,CAAC,UAAW,EAAK,EAAE,EACrB,KAAK,CAAC,aAAc,CAAE,WAAW,CAAM,GAE1C,GAAI,CAAC,EAAQ,OACb,GAAI,EAAY,MAAM,EAEtB,IAAM,EAAS,CAAC,GAAQ,EAAA,AAAE,EAAE,GAAG,CAAC,AAAC,IAAM,AAAC,CACtC,GAAG,CAAC,CACJ,cAAgB,EAA8B,QAAQ,CAChD,EAA8B,QAAgC,CAAC,EAAE,EAAE,OAAS,EAC9E,EACN,CAAC,EAED,EAAU,GACV,EAAS,KACX,CAAE,MAAO,EAAK,CACZ,GAAI,CAAC,EAAQ,OACb,EAAS,aAAe,MAAQ,EAAI,OAAO,CAAG,wBAChD,QAAU,CACJ,GAAQ,GAAW,EACzB,EACF,CAAC,GAEM,KAAQ,GAAS,CAAO,CACjC,EAAG,CAAC,EAAU,EAAM,EAAW,EAE/B,IAAM,EAAU,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,KAC1B,GAAW,GACX,EAAc,AAAC,GAAM,EAAI,EAC3B,EAAG,EAAE,EAyCL,MAAO,QAAE,EAAQ,UAAS,QAAO,SAvChB,MAAO,IAOtB,GAAI,CAAC,EAAM,OACX,GAAM,OAAE,CAAK,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,UAAU,MAAM,CAAC,CACrD,QAAS,EAAK,EAAE,CAChB,GAAG,CAAI,AACT,GAEA,OADI,AAAC,GAAO,IACL,CACT,EAyB2C,YAvBvB,MAClB,EACA,KAQA,GAAI,CAAC,EAAM,OACX,GAAM,OAAE,CAAK,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,UAAU,MAAM,CAAC,GAAM,EAAE,CAAC,KAAM,GAAI,EAAE,CAAC,UAAW,EAAK,EAAE,EAE/F,OADK,AAAD,GAAQ,IACL,CACT,EASwD,YAPpC,MAAO,IACzB,GAAI,CAAC,EAAM,OACX,GAAM,OAAE,CAAK,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,UAAU,MAAM,GAAG,EAAE,CAAC,KAAM,GAAI,EAAE,CAAC,UAAW,EAAK,EAAE,EAE3F,OADI,AAAC,GAAO,IACL,CACT,UAEqE,CAAQ,CAC/E,mEC7FA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OCHA,EAAA,EAAA,CAAA,CAAA,OAEA,EAAA,EAAA,CAAA,CAAA,OAQe,SAAS,EAAS,SAAE,CAAO,YAAE,CAAU,cAAE,CAAY,CAAiB,EACnF,IAAM,EACJ,EAAQ,eAAe,EAAI,GACvB,0CACA,EAAQ,eAAe,EAAI,GACzB,uCACA,0CAER,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gJACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2CACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAK,CAAA,CAAC,QAAQ,kBAAU,EAAQ,UAAU,EAAI,kBAC/C,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,iCACb,EAAQ,YAAY,CAAG,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAQ,YAAY,EAAI,QAG/D,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,wGACX,EAAQ,KAAK,GAEhB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mEACV,EAAQ,OAAO,GAElB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCACf,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,6CAAqC,EAAQ,MAAM,SAGvE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAC,uCAAuC,EAAE,EAAW,2CAA2C,CAAC,UAC/G,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,kCAA0B,EAAQ,eAAe,KAEnE,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAW,EAAQ,EAAE,EACpC,UAAW,CAAC,+CAA+C,EACzD,EAAQ,aAAa,CACjB,+BACA,yDAAA,CACJ,UAEF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,UAAU,KAAM,EAAQ,aAAa,CAAG,eAAiB,OAAQ,OAAO,eAAe,QAAQ,qBAC5G,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,IAAK,EAAE,gEAM/E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wEACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,IAAe,EAAQ,EAAE,EACxC,UAAU,2IACX,iBAGD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CACC,KAAM,EAAQ,UAAU,CACxB,OAAO,SACP,IAAI,sBACJ,UAAU,4HACX,uBAMT,CDvEA,IAAA,EAAA,EAAA,CAAA,CAAA,OEJA,EAAA,EAAA,CAAA,CAAA,OFMA,EAAA,EAAA,CAAA,CAAA,OAGe,SAAS,IACtB,GAAM,CAAE,UAAQ,YAAE,CAAU,SAAE,CAAO,SAAE,CAAO,CAAE,YAAU,gBAAE,CAAc,QAAE,CAAM,eAAE,CAAa,CAAE,CAAG,AEAjG,SAAS,EACd,GAAM,UAAE,CAAQ,MAAE,CAAI,CAAE,CAAG,CAAA,EAAA,EAAA,OAAA,AAAO,IAC5B,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAqB,EAAE,EACzD,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAW,EAAE,EACnD,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACjC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAU,CAAE,SAAU,MAAO,OAAQ,EAAG,GACxE,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC7C,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAC5C,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,GAE7C,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GAAI,CAAC,EAAM,OACX,IAAI,GAAS,EA4Cb,MA1CA,CAAC,UACC,GAAI,CACF,IAAI,EAAQ,EACT,IAAI,CAAC,YACL,MAAM,CAAC,6BACP,EAAE,CAAC,UAAW,EAAK,EAAE,EACrB,KAAK,CAAC,kBAAmB,CAAE,WAAW,CAAM,GAE3C,EAAQ,MAAM,EAAE,CAClB,EAAQ,EAAM,KAAK,CAAC,QAAS,CAAC,CAAC,EAAE,EAAQ,MAAM,CAAC,CAAC,EAAC,EAGpD,GAAM,MAAE,CAAI,CAAE,MAAO,CAAU,CAAE,CAAG,MAAM,EAC1C,GAAI,CAAC,EAAQ,OACb,GAAI,EAAY,MAAM,EAEtB,IAAI,EAAS,AAAC,IAAQ,EAAA,AAAE,EAAE,GAAG,CAAE,AAAD,IAC5B,IAAM,EAAS,EAA8B,MAAM,CACnD,MAAO,CACL,GAAG,CAAC,CACJ,WAAY,GAAO,MAAQ,GAC3B,UAAW,GAAO,UAAY,EAChC,CACF,GAEM,EAAa,IAAI,IAAI,IAAI,EAAO,GAAG,CAAC,AAAC,GAAM,EAAE,SAAS,EAAE,MAAM,CAAC,UAAU,CAC/E,EAAc,GAEW,OAAO,CAA5B,EAAQ,QAAQ,GAClB,EAAS,EAAO,MAAM,CAAC,AAAC,GAAM,EAAE,SAAS,GAAK,EAAQ,QAAQ,GAGhE,EAAY,GACZ,EAAS,KACX,CAAE,MAAO,EAAK,CACZ,GAAI,CAAC,EAAQ,OACb,EAAS,aAAe,MAAQ,EAAI,OAAO,CAAG,0BAChD,QAAU,CACJ,GAAQ,GAAW,EACzB,EACF,CAAC,GAEM,KAAQ,GAAS,CAAO,CACjC,EAAG,CAAC,EAAU,EAAM,EAAS,EAAW,EAExC,IAAM,EAAU,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,KAC1B,GAAW,GACX,EAAc,AAAC,GAAM,EAAI,EAC3B,EAAG,EAAE,EAEC,EAAiB,MAAO,IAC5B,IAAM,EAAU,EAAS,IAAI,CAAC,AAAC,GAAM,EAAE,EAAE,GAAK,GAC9C,GAAI,CAAC,GAAW,CAAC,EAAM,OAEvB,EAAY,AAAC,GACX,EAAK,GAAG,CAAE,AAAD,GAAQ,EAAE,EAAE,GAAK,EAAK,CAAE,GAAG,CAAC,CAAE,cAAe,CAAC,EAAE,aAAa,AAAC,EAAI,IAG7E,GAAM,OAAE,CAAK,CAAE,CAAG,MAAM,EACrB,IAAI,CAAC,YACL,MAAM,CAAC,CAAE,cAAe,CAAC,EAAQ,aAAa,AAAC,GAC/C,EAAE,CAAC,KAAM,GACT,EAAE,CAAC,UAAW,EAAK,EAAE,EAEpB,GACF,EAAY,AAAC,EADJ,CAEP,EAAK,GAAG,CAAC,AAAC,GAAO,EAAE,EAAE,GAAK,EAAK,CAAE,GAAG,CAAC,CAAE,cAAe,EAAQ,aAAa,AAAC,EAAI,GAGtF,EAuBA,MAAO,UACL,aACA,EACA,gBACA,UACA,aACA,iBACA,EACA,OA7Ba,MAAO,IACpB,GAAK,CAAD,EACJ,GAAiB,AADN,GAEX,EAAS,MACT,GAAI,CACF,IAAM,EAAM,MAAM,MAAM,cAAe,CACrC,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,SAAE,CAAQ,EACjC,GACA,GAAI,CAAC,EAAI,EAAE,CAAE,CACX,IAAM,EAAO,MAAM,EAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,EAAC,CAAC,EAC7C,EAAS,EAAK,KAAK,EAAI,6BACvB,MACF,CACA,GACF,QAAU,CACR,EAAiB,GACnB,EACF,gBAWE,UACA,CACF,CACF,IFrHQ,QAAE,CAAM,CAAE,CAAG,CAAA,EAAA,EAAA,SAAA,AAAS,IACtB,CAAE,MAAI,CAAE,CAAG,CAAA,EAAA,EAAA,OAAA,AAAO,IAClB,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACzC,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjD,CAAC,EAAkB,EAAoB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAW,EAAE,EAC/D,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAGlD,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,IAAM,EAAQ,WAAW,KACvB,EAAW,AAAC,IAAU,CAAE,EAAH,CAAM,CAAI,CAAE,OAAQ,EAAY,CAAC,CACxD,EAAG,KACH,MAAO,IAAM,aAAa,EAC5B,EAAG,CAAC,EAAa,EAAW,EAE5B,IAAM,EAAe,MAAO,IAC1B,GAAmB,GACnB,MAAM,EAAO,EACf,EAEM,EAAsB,UAC1B,GAAI,CAAC,GAAQ,AAA4B,MAAX,MAAM,CAAQ,OAC5C,EAAS,MACT,IAAM,EAAM,MAAM,MAAM,sBAAuB,CAC7C,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,CAAE,WAAY,CAAiB,EACtD,GACA,GAAI,CAAC,EAAI,EAAE,CAAE,YAEX,EAAS,CADI,MAAM,EAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,EAAC,CAAC,CAAA,EAC/B,KAAK,EAAI,4BAGzB,GAAM,OAAE,CAAK,CAAE,CAAG,MAAM,EAAI,IAAI,GAChC,EAAO,IAAI,CAAC,CAAC,kBAAkB,EAAE,EAAM,EAAE,CAAA,CAAE,CAC7C,EAEM,EAAsB,AAAC,IAC3B,EAAoB,AAAC,GACnB,EAAK,QAAQ,CAAC,GAAM,EAAK,MAAM,CAAE,AAAD,GAAO,IAAM,GAAM,IAAI,EAAM,EAAG,CAEpE,EAEM,EAAgB,CAAC,SAAU,EAAW,QAE5C,AAAI,EAEA,CAAA,EAAA,EAAA,EAFS,EAET,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+CACf,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sDAEjB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,CAAC,EAAG,EAAG,EAAE,CAAC,GAAG,CAAC,AAAC,GACd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAY,UAAU,8CAAb,SAQlB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wFACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UACC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,kCACV,EAAS,MAAM,CAAC,yBAGrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAK,CAAA,CACJ,YAAY,qBACZ,MAAO,EACP,SAAU,AAAC,GAAM,EAAe,EAAE,MAAM,CAAC,KAAK,EAC9C,KACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,UAAU,KAAK,OAAO,OAAO,eAAe,QAAQ,qBACjE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,sDAK7E,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAM,CAAA,CAAC,QAAS,IAAM,GAAmB,GAAO,SAAU,YACzD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,eAAe,KAAK,OAAO,OAAO,eAAe,QAAQ,qBACtE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,kHAEtE,EAAgB,cAAgB,mBAMtC,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sGACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,0BAAkB,IAClC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAAS,IAAM,EAAS,MAAO,UAAU,0DAC/C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,UAAU,KAAK,OAAO,OAAO,eAAe,QAAQ,qBACjE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,gCAO7E,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gCACZ,EAAc,GAAG,CAAC,AAAC,GAClB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAEC,QAAS,IAAM,EAAW,AAAC,IAAU,CAAE,EAAH,CAAM,CAAI,CAAE,SAAU,EAAI,CAAC,EAC/D,UAAW,CAAC,8EAA8E,EACxF,EAAQ,QAAQ,GAAK,EACjB,2BACA,8FAAA,CACJ,UAED,GARI,MAcV,EAAiB,MAAM,CAAG,GACzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yGACb,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,gDACb,EAAiB,MAAM,CAAC,WAAS,EAAiB,MAAM,CAAG,EAAI,IAAM,GAAG,eAE3E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAM,CAAA,CAAC,QAAQ,QAAQ,KAAK,KAAK,QAAS,IAAM,EAAoB,EAAE,WAAG,UAG1E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAM,CAAA,CAAC,KAAK,KAAK,QAAS,WAAqB,yBAOjC,IAApB,EAAS,MAAM,CACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8BACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4FACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0BAA0B,KAAK,OAAO,OAAO,eAAe,QAAQ,qBACjF,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,IAAK,EAAE,+IAG3E,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,oDAA2C,oBACzD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,6DAC1C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAM,CAAA,CAAC,QAAS,IAAM,GAAmB,YAAO,uBAGnD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAS,GAAG,CAAC,AAAC,GACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAEC,QAAS,EACT,WAAY,EACZ,aAAc,GAHT,EAAQ,EAAE,KAUvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAK,CAAA,CAAC,OAAQ,EAAiB,QAAS,IAAM,GAAmB,GAAQ,MAAM,kCAC3D,IAAlB,EAAO,MAAM,CACZ,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,4CAErC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,sDACzC,EAAO,MAAM,CAAC,AAAC,GAAM,EAAE,SAAS,EAAE,GAAG,CAAC,AAAC,GACtC,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAEC,QAAS,IAAM,EAAa,EAAM,EAAE,EACpC,UAAU,qJAEV,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,6CAAqC,EAAM,IAAI,GAC/D,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sCAA8B,EAAM,QAAQ,CAAC,KAAK,CAAC,EAAG,GAAG,IAAI,CAAC,UALzE,EAAM,EAAE,UAa7B"}